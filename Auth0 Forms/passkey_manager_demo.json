{
  "version": "4.0.0",
  "form": {
    "name": "Passkey Manager Demo",
    "languages": {
      "primary": "en"
    },
    "nodes": [
      {
        "id": "flow_nC6W",
        "type": "FLOW",
        "coordinates": {
          "x": -2764,
          "y": -1289
        },
        "alias": "New flow",
        "config": {
          "flow_id": "#FLOW-1#",
          "next_node": "router_rDM5"
        }
      },
      {
        "id": "router_rDM5",
        "type": "ROUTER",
        "coordinates": {
          "x": -2326,
          "y": -1333
        },
        "alias": "New router",
        "config": {
          "rules": [
            {
              "id": "id_4094434791479",
              "alias": "Token can not be Decoded",
              "condition": {
                "operands": [
                  {
                    "operands": [
                      "{{vars.is_error.result}}",
                      "true"
                    ],
                    "operator": "EQ"
                  }
                ],
                "operator": "AND"
              },
              "next_node": "step_vUzi"
            }
          ],
          "fallback": "step_0iec"
        }
      },
      {
        "id": "step_vUzi",
        "type": "STEP",
        "coordinates": {
          "x": -1135,
          "y": -1201
        },
        "alias": "New step",
        "config": {
          "components": [
            {
              "id": "rich_text_3myV",
              "category": "BLOCK",
              "type": "RICH_TEXT",
              "config": {
                "content": "<h1>ðŸš§ Debug Error Screen ðŸš§</h1><p>Oops! The token for My Account API not included in Form Redirect. Please check the action logs to determine why it was not able to be sent through.</p>"
              }
            },
            {
              "id": "rich_text_h4Jo",
              "category": "BLOCK",
              "type": "RICH_TEXT",
              "config": {
                "content": "<h3>VARS DEBUG:</h3><p>{{vars}}</p>"
              }
            },
            {
              "id": "next_button_jJBs",
              "category": "BLOCK",
              "type": "NEXT_BUTTON",
              "config": {
                "text": "Continue"
              }
            }
          ],
          "next_node": "$ending"
        }
      },
      {
        "id": "step_0iec",
        "type": "STEP",
        "coordinates": {
          "x": -1091,
          "y": -1875
        },
        "alias": "New step",
        "config": {
          "components": [
            {
              "id": "custom_K1CY",
              "category": "FIELD",
              "type": "CUSTOM",
              "required": false,
              "sensitive": false,
              "config": {
                "schema": {},
                "code": "function PasskeyCombinedField(context) {\n    // --- Configuration ---\n    const ALLOW_DUPLICATE_PASSKEYS = false;\n\n    /**\n     * AAGUID Mapping for common authenticators.\n     * Add more AAGUIDs here as needed.\n     */\n    const AAGUID_MAP = {\n        \"ad159101-4596-47cd-b297-a5197973433e\": \"Apple iCloud Keychain\",\n        \"ea9b6d66-bf42-4efd-a136-2208a94c4491\": \"Google Password Manager\",\n        \"6028c021-f998-4cb4-969b-ef9927cd3729\": \"Windows Hello\",\n        \"44393243-4c4c-4f20-5354-414e44415244\": \"Windows Hello\",\n        \"ee2e132c-3520-4286-90b5-c088921503c8\": \"YubiKey 5 Series\",\n        \"adce0002-35bc-c60a-648b-0b25f1f05503\": \"Chrome on Mac\",\n        \"00000000-0000-0000-0000-000000000000\": \"Unknown Device\"\n    };\n\n    // --- State & UI elements ---\n    let container;\n    let listContainer;\n    let messageDiv;\n    let registerButton;\n    let skipButton;\n    let auth0Domain, myAccountAt;\n    let isProcessing = false;\n    let hasRegisteredInSession = false;\n\n    // --- Icons ---\n    const ICONS = {\n        fingerprint: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M20 11v6\"/><path d=\"M20 13h2\"/><path d=\"M3 21v-2a4 4 0 0 1 4-4h6a4 4 0 0 1 2.072.578\"/><circle cx=\"10\" cy=\"7\" r=\"4\"/><circle cx=\"20\" cy=\"19\" r=\"2\"/></svg>`,\n        trash: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M3 6h18\"/><path d=\"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\"/><path d=\"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\"/><line x1=\"10\" x2=\"10\" y1=\"11\" y2=\"17\"/><line x1=\"14\" x2=\"14\" y1=\"11\" y2=\"17\"/></svg>`,\n        check: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"/><polyline points=\"22 4 12 14.01 9 11.01\"/></svg>`,\n        alert: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"10\"/><line x1=\"12\" x2=\"12\" y1=\"8\" y2=\"12\"/><line x1=\"12\" x2=\"12.01\" y1=\"16\" y2=\"16\"/></svg>`\n    };\n\n    // --- Helper functions (Base64/ArrayBuffer) ---\n    function arrayBufferToBase64Url(buffer) {\n        const bytes = new Uint8Array(buffer);\n        let str = '';\n        for (let i = 0; i < bytes.byteLength; i++) str += String.fromCharCode(bytes[i]);\n        return btoa(str).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=/g, '');\n    }\n\n    function base64UrlToArrayBuffer(base64url) {\n        let base64 = base64url.replace(/-/g, '+').replace(/_/g, '/');\n        const pad = base64.length % 4;\n        if (pad) base64 += new Array(5 - pad).join('=');\n        const str = atob(base64);\n        const buffer = new ArrayBuffer(str.length);\n        let bytes = new Uint8Array(buffer);\n        for (let i = 0; i < str.length; i++) bytes[i] = str.charCodeAt(i);\n        return buffer;\n    }\n\n    function showMessage(text, isError = false) {\n        if (!messageDiv) return;\n        messageDiv.innerHTML = '';\n        const iconSpan = document.createElement('span');\n        iconSpan.className = 'message-icon';\n        iconSpan.innerHTML = isError ? ICONS.alert : ICONS.check;\n        \n        const textNode = document.createTextNode(text);\n        messageDiv.appendChild(iconSpan);\n        messageDiv.appendChild(textNode);\n        messageDiv.style.display = 'flex';\n        messageDiv.className = `passkey-message ${isError ? 'error' : 'info'}`;\n    }\n\n    function updateSkipButtonText() {\n        if (skipButton) {\n            skipButton.textContent = hasRegisteredInSession ? 'Continue' : 'Skip for Now';\n        }\n    }\n\n    async function fetchAuthenticators() {\n        listContainer.innerHTML = '<div class=\"loading-text\">Updating passkey list...</div>';\n        try {\n            const response = await fetch(`https://${auth0Domain}/me/v1/authentication-methods`, {\n                method: 'GET',\n                headers: { 'Accept': 'application/json', 'Authorization': `Bearer ${myAccountAt}` }\n            });\n            if (!response.ok) throw new Error('Failed to fetch list.');\n            const data = await response.json();\n            const passkeys = (data.authentication_methods || []).filter(m => m.type === 'passkey');\n            renderPasskeyList(passkeys);\n        } catch (err) {\n            showMessage(`Error loading passkeys: ${err.message}`, true);\n        }\n    }\n\n    async function deleteAuthenticator(methodId, btn) {\n        if (!confirm(\"Remove this passkey?\")) return;\n        const originalIcon = btn.innerHTML;\n        btn.disabled = true;\n        btn.innerHTML = '...';\n        try {\n            const response = await fetch(`https://${auth0Domain}/me/v1/authentication-methods/${methodId}`, {\n                method: 'DELETE',\n                headers: { 'Authorization': `Bearer ${myAccountAt}` }\n            });\n            if (response.status !== 204) throw new Error('Delete failed.');\n            showMessage(\"Passkey removed successfully.\");\n            await fetchAuthenticators();\n        } catch (err) {\n            showMessage(err.message, true);\n            btn.disabled = false;\n            btn.innerHTML = originalIcon;\n        }\n    }\n\n    async function handleRegisterPasskey() {\n        if (isProcessing) return;\n        isProcessing = true;\n        registerButton.disabled = true;\n        if (skipButton) skipButton.disabled = true;\n        showMessage('Starting registration...');\n\n        try {\n            const challengeResponse = await fetch(`https://${auth0Domain}/me/v1/authentication-methods`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${myAccountAt}` },\n                body: JSON.stringify({ type: 'passkey' }),\n            });\n\n            if (!challengeResponse.ok) {\n                const errorData = await challengeResponse.json();\n                throw new Error(errorData.detail || 'Challenge failed');\n            }\n\n            const { authn_params_public_key, auth_session } = await challengeResponse.json();\n\n            const publicKeyCredentialCreationOptions = {\n                challenge: base64UrlToArrayBuffer(authn_params_public_key.challenge),\n                rp: authn_params_public_key.rp,\n                user: {\n                    id: base64UrlToArrayBuffer(authn_params_public_key.user.id),\n                    name: authn_params_public_key.user.name,\n                    displayName: authn_params_public_key.user.displayName,\n                },\n                pubKeyCredParams: authn_params_public_key.pubKeyCredParams,\n                timeout: authn_params_public_key.timeout,\n                attestation: authn_params_public_key.attestation,\n                authenticatorSelection: { requireResidentKey: true, userVerification: 'preferred' },\n                ...(!ALLOW_DUPLICATE_PASSKEYS && {\n                    excludeCredentials: (authn_params_public_key.excludeCredentials || []).map(cred => ({\n                        id: base64UrlToArrayBuffer(cred.id),\n                        type: cred.type,\n                        transports: cred.transports\n                    }))\n                })\n            };\n\n            const credential = await navigator.credentials.create({ publicKey: publicKeyCredentialCreationOptions });\n\n            const authnResponse = {\n                id: arrayBufferToBase64Url(credential.rawId),\n                rawId: arrayBufferToBase64Url(credential.rawId),\n                type: credential.type,\n                response: {\n                    clientDataJSON: arrayBufferToBase64Url(credential.response.clientDataJSON),\n                    attestationObject: arrayBufferToBase64Url(credential.response.attestationObject),\n                },\n            };\n\n            const verifyResponse = await fetch(`https://${auth0Domain}/me/v1/authentication-methods/passkey|new/verify`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${myAccountAt}` },\n                body: JSON.stringify({ auth_session, authn_response: authnResponse }),\n            });\n\n            if (!verifyResponse.ok) throw new Error('Verification failed');\n            \n            hasRegisteredInSession = true;\n            updateSkipButtonText();\n            showMessage('Passkey added successfully!');\n            await fetchAuthenticators();\n        } catch (err) {\n            showMessage(err.name === 'NotAllowedError' ? 'Registration cancelled.' : err.message, true);\n        } finally {\n            isProcessing = false;\n            registerButton.disabled = false;\n            if (skipButton) skipButton.disabled = false;\n        }\n    }\n\n    /**\n     * Helper to resolve the device name from AAGUID\n     */\n    function resolveDeviceName(pk) {\n        if (pk.name) return pk.name;\n        \n        if (pk.aaguid) {\n            const lowerAaguid = pk.aaguid.toLowerCase();\n            if (AAGUID_MAP[lowerAaguid]) {\n                return AAGUID_MAP[lowerAaguid];\n            }\n        }\n        \n        return \"Unnamed Passkey\";\n    }\n\n    function renderPasskeyList(passkeys) {\n        listContainer.innerHTML = '';\n        if (passkeys.length === 0) {\n            listContainer.innerHTML = '<div class=\"empty-state\">No passkeys enrolled yet.</div>';\n            return;\n        }\n\n        const listElement = document.createElement('div');\n        listElement.className = 'pk-list';\n\n        passkeys.forEach(pk => {\n            const item = document.createElement('div');\n            item.className = 'pk-row';\n            \n            const deviceName = resolveDeviceName(pk);\n            const isUnknown = deviceName === \"Unnamed Passkey\" || deviceName === \"Unknown Device\";\n            const displayDate = new Date(pk.created_at).toLocaleDateString();\n\n            item.innerHTML = `\n                <div class=\"pk-icon-wrapper\">${ICONS.fingerprint}</div>\n                <div class=\"pk-info\">\n                    <div class=\"pk-name\">${deviceName}</div>\n                    <div class=\"pk-meta\">Enrolled on ${displayDate}</div>\n                    ${(isUnknown && pk.aaguid) ? `<div class=\"pk-aaguid-subtitle\" title=\"Click to select and copy AAGUID\">AAGUID: ${pk.aaguid}</div>` : ''}\n                </div>\n            `;\n            const delBtn = document.createElement('button');\n            delBtn.className = 'pk-del-btn';\n            delBtn.title = 'Remove Passkey';\n            delBtn.innerHTML = ICONS.trash;\n            delBtn.onclick = () => deleteAuthenticator(pk.id, delBtn);\n            item.appendChild(delBtn);\n            listElement.appendChild(item);\n        });\n        listContainer.appendChild(listElement);\n    }\n\n    return {\n        init() {\n            const params = context.custom.getParams();\n            auth0Domain = params.auth0Domain;\n            myAccountAt = params.myAccountAt;\n\n            container = document.createElement('div');\n            container.className = 'passkey-combined-container';\n            container.innerHTML = `\n                <style>\n                    .pk-header {\n                        display: flex;\n                        align-items: center;\n                        gap: 16px;\n                        margin-bottom: 24px;\n                        padding-bottom: 16px;\n                        border-bottom: 1px solid #e2e8f0;\n                    }\n                    .pk-header-icon {\n                        background: #f1f5f9;\n                        color: #5045e5;\n                        padding: 12px;\n                        border-radius: 12px;\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        border: 1px solid #e2e8f0;\n                    }\n                    .pk-header-text {\n                        display: flex;\n                        flex-direction: column;\n                    }\n                    .pk-header-title {\n                        font-size: 18px;\n                        font-weight: 700;\n                        color: #1e293b;\n                        margin: 0;\n                    }\n                    .pk-header-subtitle {\n                        font-size: 13px;\n                        color: #64748b;\n                        margin: 2px 0 0 0;\n                    }\n                    .pk-aaguid-subtitle {\n                        font-size: 10px;\n                        color: #94a3b8;\n                        font-family: monospace;\n                        margin-top: 4px;\n                        cursor: text;\n                        user-select: all;\n                        background: #f1f5f9;\n                        padding: 2px 4px;\n                        border-radius: 4px;\n                        display: inline-block;\n                    }\n                    .pk-section-title {\n                        font-size: 12px;\n                        font-weight: 600;\n                        text-transform: uppercase;\n                        letter-spacing: 0.05em;\n                        color: #94a3b8;\n                        margin-bottom: 12px;\n                    }\n                </style>\n                <div class=\"pk-header\">\n                    <div class=\"pk-header-icon\">\n                        ${ICONS.fingerprint.replace('width=\"20\"', 'width=\"28\"').replace('height=\"20\"', 'height=\"28\"')}\n                    </div>\n                    <div class=\"pk-header-text\">\n                        <h2 class=\"pk-header-title\">Passkey Management</h2>\n                        <p class=\"pk-header-subtitle\">Secure your account with biometric authentication.</p>\n                    </div>\n                </div>\n                <div class=\"pk-section-title\">Your Enrolled Passkeys</div>\n            `;\n\n            listContainer = document.createElement('div');\n            container.appendChild(listContainer);\n\n            messageDiv = document.createElement('div');\n            container.appendChild(messageDiv);\n\n            const addSection = document.createElement('div');\n            addSection.className = 'pk-add-section';\n            \n            registerButton = document.createElement('button');\n            registerButton.className = 'add-pk-btn';\n            registerButton.textContent = '+ Add New Passkey';\n            registerButton.onclick = handleRegisterPasskey;\n            \n            skipButton = document.createElement('button');\n            skipButton.className = 'skip-btn';\n            skipButton.textContent = 'Skip for Now';\n            skipButton.onclick = () => {\n                if (context && context.form && typeof context.form.goForward === 'function') {\n                    context.form.goForward();\n                }\n            };\n\n            addSection.appendChild(registerButton);\n            addSection.appendChild(skipButton);\n            container.appendChild(addSection);\n\n            fetchAuthenticators();\n            return container;\n        },\n        block() { \n            if (registerButton) registerButton.disabled = true; \n            if (skipButton) skipButton.disabled = true;\n        },\n        unblock() { \n            if (registerButton) registerButton.disabled = false; \n            if (skipButton) skipButton.disabled = false;\n        }\n    };\n}",
                "css": "/* Modern UI Variables */\n:root {\n  --pk-primary: #4f46e5;\n  --pk-primary-hover: #4338ca;\n  --pk-bg: #ffffff;\n  --pk-surface: #f8fafc;\n  --pk-border: #e2e8f0;\n  --pk-text-main: #1e293b;\n  --pk-text-muted: #64748b;\n  --pk-danger: #ef4444;\n  --pk-danger-bg: #fef2f2;\n  --pk-success-bg: #f0fdf4;\n  --pk-success-text: #166534;\n  --pk-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);\n}\n\n.passkey-combined-container {\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif;\n  max-width: 100%;\n  color: var(--pk-text-main);\n}\n\n.pk-section-title {\n  font-size: 0.875rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.025em;\n  color: var(--pk-text-muted);\n  margin-bottom: 1rem;\n}\n\n/* List Items */\n.pk-list {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n\n.pk-row {\n  display: flex;\n  align-items: center;\n  padding: 1rem;\n  background: var(--pk-bg);\n  border: 1px solid var(--pk-border);\n  border-radius: 12px;\n  box-shadow: var(--pk-shadow);\n  transition: transform 0.1s ease;\n}\n\n.pk-icon-wrapper {\n  background: var(--pk-surface);\n  color: var(--pk-primary);\n  padding: 0.5rem;\n  border-radius: 8px;\n  margin-right: 1rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.pk-info {\n  flex-grow: 1;\n}\n\n.pk-name {\n  font-size: 0.9375rem;\n  font-weight: 600;\n  margin-bottom: 0.125rem;\n}\n\n.pk-meta {\n  font-size: 0.75rem;\n  color: var(--pk-text-muted);\n}\n\n/* Actions */\n.pk-del-btn {\n  background: transparent;\n  color: var(--pk-text-muted);\n  border: 1px solid transparent;\n  padding: 0.5rem;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n}\n\n.pk-del-btn:hover {\n  background: var(--pk-danger-bg);\n  color: var(--pk-danger);\n  border-color: #fee2e2;\n}\n\n/* Messaging */\n.passkey-message {\n  margin: 1.25rem 0;\n  padding: 1rem;\n  border-radius: 10px;\n  font-size: 0.875rem;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  animation: slideIn 0.3s ease-out;\n}\n\n@keyframes slideIn {\n  from { opacity: 0; transform: translateY(-4px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n.passkey-message.info {\n  background: #eff6ff;\n  border: 1px solid #dbeafe;\n  color: #1e40af;\n}\n\n.passkey-message.error {\n  background: var(--pk-danger-bg);\n  border: 1px solid #fee2e2;\n  color: #991b1b;\n}\n\n/* Buttons */\n.pk-add-section {\n  margin-top: 1.5rem;\n  padding-top: 1.5rem;\n  border-top: 1px solid var(--pk-border);\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n\n.add-pk-btn {\n  width: 100%;\n  padding: 0.75rem 1rem;\n  background: var(--pk-primary);\n  color: white;\n  border: none;\n  border-radius: 10px;\n  font-weight: 600;\n  font-size: 0.9375rem;\n  cursor: pointer;\n  box-shadow: 0 4px 6px -1px rgb(79 70 229 / 0.1);\n  transition: all 0.2s;\n}\n\n.add-pk-btn:hover {\n  background: var(--pk-primary-hover);\n  transform: translateY(-1px);\n  box-shadow: 0 10px 15px -3px rgb(79 70 229 / 0.1);\n}\n\n.skip-btn {\n  width: 100%;\n  padding: 0.75rem 1rem;\n  background: transparent;\n  color: var(--pk-text-muted);\n  border: 1px solid var(--pk-border);\n  border-radius: 10px;\n  font-weight: 500;\n  font-size: 0.9375rem;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.skip-btn:hover {\n  background: var(--pk-surface);\n  border-color: #cbd5e1;\n  color: var(--pk-text-main);\n}\n\n.add-pk-btn:disabled, .skip-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.empty-state {\n  text-align: center;\n  padding: 2rem;\n  background: var(--pk-surface);\n  border: 2px dashed var(--pk-border);\n  border-radius: 12px;\n  color: var(--pk-text-muted);\n  font-size: 0.875rem;\n}",
                "params": {
                  "email": "{{context.user.email}}",
                  "clientId": "miWSp1Q2yeXDHxAulVU3Sq3XpfuT3xgK",
                  "mainUserID": "{{context.user.user_id}}",
                  "auth0Domain": "passkey-demo-awhit.oktademo.cloud",
                  "myAccountAt": "{{vars.api_token}}"
                }
              }
            }
          ],
          "next_node": "$ending"
        }
      }
    ],
    "start": {
      "next_node": "flow_nC6W",
      "coordinates": {
        "x": -3072,
        "y": -1295
      }
    },
    "ending": {
      "resume_flow": true,
      "coordinates": {
        "x": 786,
        "y": -144
      }
    },
    "style": {
      "css": "#jump_button_GqoS {\n  background-color: green;\n}"
    }
  },
  "flows": {
    "#FLOW-1#": {
      "name": "Direct Token Passthrough",
      "actions": [
        {
          "id": "decode_json_web_token_onOU",
          "alias": "decode_token",
          "type": "JWT",
          "action": "DECODE_JWT",
          "allow_failure": true,
          "mask_output": false,
          "params": {
            "token": "{{vars.api_token}}"
          }
        },
        {
          "id": "is_jwt_valid",
          "alias": "is_jwt_valid",
          "type": "FLOW",
          "action": "BOOLEAN_CONDITION",
          "allow_failure": false,
          "mask_output": false,
          "params": {
            "if": {
              "operands": [
                {
                  "operands": [
                    "{{actions.decode_token.payload.sub}}",
                    "{{context.user.user_id}}"
                  ],
                  "operator": "EQ"
                },
                {
                  "operands": [
                    "{{actions.decode_token.payload.aud}}",
                    "\"https://passkey-demo-awhit.oktademo.cloud/me/\""
                  ],
                  "operator": "EQ"
                }
              ],
              "operator": "AND"
            },
            "else": [
              {
                "id": "store_shared_variable_2zEl",
                "alias": "store_error",
                "type": "FLOW",
                "action": "STORE_VARS",
                "allow_failure": true,
                "mask_output": false,
                "params": {
                  "vars": {
                    "is_error": "{{actions.is_jwt_valid}}"
                  }
                }
              }
            ]
          }
        }
      ]
    }
  },
  "connections": {}
}